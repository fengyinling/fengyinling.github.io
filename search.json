[{"title":"搭建一个随机图片API","url":"http://example.com/2023/03/08/搭建一个随机图片API/","content":"<p>​                                                                                        原作: <a href=\"https://www.hxuanyu.com/\">hxuanyu</a></p>\n<p>在网站开发过程中，为了网站的美观，我们往往会在一些地方使用随机图片，比如网站背景、文章缩略图等。网上的随机图片api有很多，但是api作者随时都可能关闭，而且api返回的图片往往不能满足自己的需求，因此可以搭建一个自己的随机图片api。</p>\n<h4 id=\"制作方法\"><a href=\"#制作方法\" class=\"headerlink\" title=\"制作方法\"></a>制作方法</h4><ul>\n<li>首先就是准备你喜欢的高清图片了，可以在网络上寻找喜欢的图片，然后将这些图片放在服务器上的某文件夹内，当然也可以部署在cdn上以加快访问速度。</li>\n<li>图片准备好后，网站目录新建一个文件夹，并在文件夹下新建<code>index.php</code>文件。<code>index.php</code>中的内容如下：</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php</span><br><span class=\"line\">&lt;?php</span><br><span class=\"line\">//存有图片链接的文件名images.txt</span><br><span class=\"line\">$filename = &quot;images.txt&quot;;</span><br><span class=\"line\">if(!file_exists($filename))&#123;</span><br><span class=\"line\">    die(&#x27;指定文件不存在(images.txt)&#x27;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">//从文本获取链接</span><br><span class=\"line\">$pics = [];</span><br><span class=\"line\">$fs = fopen($filename, &quot;r&quot;);</span><br><span class=\"line\">while(!feof($fs))&#123;</span><br><span class=\"line\">    $line=trim(fgets($fs));</span><br><span class=\"line\">    if($line!=&#x27;&#x27;)&#123;</span><br><span class=\"line\">        array_push($pics, $line);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">//从数组随机获取链接</span><br><span class=\"line\">$pic = $pics[array_rand($pics)];</span><br><span class=\"line\"> </span><br><span class=\"line\">//返回指定格式</span><br><span class=\"line\">$type=$_GET[&#x27;type&#x27;];</span><br><span class=\"line\">switch($type)&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">//JSON返回</span><br><span class=\"line\">case &#x27;json&#x27;:</span><br><span class=\"line\">    header(&#x27;Content-type:text/json&#x27;);</span><br><span class=\"line\">    die(json_encode([&#x27;pic&#x27;=&gt;$pic]));</span><br><span class=\"line\"> </span><br><span class=\"line\">default:</span><br><span class=\"line\">    die(header(&quot;Location: $pic&quot;));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">?&gt;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在文件夹下新建一个<code>images.txt</code>文本文档，并在其内部填上图片的url，要求<strong>一行一个</strong>，格式如下：</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://raw.githubusercontent.com/hanxuanyu/img_cdn/1.0.9/apiimg/loveimg/01.jpg</span><br><span class=\"line\">https://raw.githubusercontent.com/hanxuanyu/img_cdn/1.0.9/apiimg/loveimg/10.jpg</span><br><span class=\"line\">https://raw.githubusercontent.com/hanxuanyu/img_cdn/1.0.9/apiimg/loveimg/10.jpg</span><br></pre></td></tr></table></figure>\n\n","categories":["科技上网"],"tags":["api"]},{"title":"虚拟专用网","url":"http://example.com/2023/03/08/虚拟专用网/","content":"<p>​                                                                                        0、安装finalshell，下载安装连接：<a href=\"https://www.hostbuf.com/t/988.html\">https://www.hostbuf.com/t/988.html</a></p>\n<p>1、需放行的端口80、443、8863、8888、8100，其他节点端口根据实际情况放行</p>\n<p>ufw allow 端口号</p>\n<hr>\n<p>2、开启防火墙</p>\n<p>iptables -P INPUT ACCEPT<br>iptables -P FORWARD ACCEPT<br>iptables -P OUTPUT ACCEPT<br>iptables -F<br>apt-get purge netfilter-persistent<br>输入reboot，重启服务器</p>\n<hr>\n<p>3、申请SSL证书<br>apt update -y       # Debian/Ubuntu 命令<br>apt install -y curl   # Debian/Ubuntu 命令<br>apt install -y socat  # Debian/Ubuntu 命令</p>\n<p>yum update -y        #CentOS 命令<br>yum install -y curl    #CentOS 命令<br>yum install -y socat   #CentOS 命令</p>\n<p>curl <a href=\"https://get.acme.sh/\">https://get.acme.sh</a> | sh<br>~/.acme.sh/acme.sh –register-account -m <a href=\"mailto:&#101;&#x78;&#97;&#x6d;&#x70;&#x6c;&#x65;&#64;&#x78;&#x78;&#46;&#x63;&#x6f;&#109;\">&#101;&#x78;&#97;&#x6d;&#x70;&#x6c;&#x65;&#64;&#x78;&#x78;&#46;&#x63;&#x6f;&#109;</a>（替换成自己的邮箱）</p>\n<hr>\n<p>4，开始申请证书</p>\n<p>~/.acme.sh/acme.sh –issue -d 域名 –standalone   #替换成自己解析好的域名，注意前后要有空格</p>\n<p>安装证书</p>\n<p>~/.acme.sh/acme.sh –installcert -d 域名 –key-file /root/private.key –fullchain-file /root/cert.crt    #替换成自己解析好的域名，注意前后要有空格<br>刷新Fianlshell窗口，在root目录下可看到证书公钥/root/cert.crt及验证文件/root/private.ke</p>\n<hr>\n<p>5、安装X-UI面板</p>\n<p>bash &lt;(curl -Ls <a href=\"https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh\">https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh</a>)</p>\n<hr>\n<p>6、安装v2ray,下载链接：<a href=\"https://github.com/2dust/v2rayN/releases\">https://github.com/2dust/v2rayN/releases</a></p>\n<p>7、如果打不开v2rayN.exe,可以安装.NET Framework 4.8，下载链接：<a href=\"https://docs.microsoft.com/zh-cn/dotnet/framework/install/guide-for-developers\">https://docs.microsoft.com/zh-cn/dotnet/framework/install/guide-for-developers</a></p>\n<hr>\n","categories":["科技上网"],"tags":["vpn"]},{"title":"","url":"http://example.com/README.html","content":"<h1 id=\"冏冏途-●’◡’●\"><a href=\"#冏冏途-●’◡’●\" class=\"headerlink\" title=\"冏冏途                ●’◡’●\"></a>冏冏途                ●’◡’●</h1><p align=\"center\">\n  <a href=\"https://count.getloli.com/\"><img src=\"https://count.getloli.com/get/@tuer?theme=rule34\">\n</a></p>\n\n \n\n<!-- auto generated at Fri Jul 22 2022 02:24:08 GMT+0000 (Coordinated Universal Time) -->\n\n<p align=\"center\"><a href=\"https://github.com/memset0/memset0/blob/master/pages/tags.md\"><img src=\"https://cdn.jsdelivr.net/gh/memset0/memset0/assets/tagcloud.png?h=cc51d9&c=1658456641992\" height=\"150\"></a></p>\n\n\n<hr>\n","categories":[],"tags":[]},{"title":"关于","url":"http://example.com/about/index.html","content":"<p align=\"center\">\n你好，欢迎来到囧兔的小宇宙,这是一个记录生活、分享技术的个人博客。\n  <a href=\"https://count.getloli.com/\"><img src=\"https://count.getloli.com/get/@yu?theme=rule34\">\n</a></p>\n\n<hr>\n","categories":[],"tags":[]},{"title":"朋友们","url":"http://example.com/friends/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://example.com/search/index.html","content":"","categories":[],"tags":[]}]